var userUtilsPro,EVENT_TYPE=Enum.EVENT_TYPE;function runBg(r,t,e){var a=(t+e)/8;const l=50;let n,o,i=[],d={x:0,y:0,tx:0,ty:0,z:.005};var h={};function m(t){t.x=Math.random()*n,t.y=Math.random()*o}return h.update=function(){d.tx*=.96,d.ty*=.96,d.x+=.8*(d.tx-d.x),d.y+=.8*(d.ty-d.y),i.forEach(t=>{if(t.x+=d.x*t.z,t.y+=d.y*t.z,t.x+=(t.x-n/2)*d.z*t.z,t.y+=(t.y-o/2)*d.z*t.z,t.z+=d.z,t.x<-l||t.x>n+l||t.y<-l||t.y>o+l){let e="z";var a=Math.abs(d.x),r=Math.abs(d.y);if(1<a||1<r){let t;t=r<a?Math.random()<a/(a+r)?"h":"v":Math.random()<r/(a+r)?"v":"h",e="h"===t?0<d.x?"l":"r":0<d.y?"t":"b"}t.z=.2+.8*Math.random(),"z"===e?(t.z=.1,t.x=Math.random()*n,t.y=Math.random()*o):"l"===e?(t.x=-l,t.y=o*Math.random()):"r"===e?(t.x=n+l,t.y=o*Math.random()):"t"===e?(t.x=n*Math.random(),t.y=-l):"b"===e&&(t.x=n*Math.random(),t.y=o+l)}})},h.render=function(){var t=n>o?n:o,e=(r.fillStyle="#000000",r.fillRect(0,0,n,o),r.fillStyle=null,r.createRadialGradient(0,0,0,0,0,n>o?n:o));e.addColorStop(0,"rgba(121, 68, 154, 0.13)"),e.addColorStop(1,"rgba(0, 0, 0, 0)"),r.fillStyle=e,r.fillRect(0,0,n,o),r.fillStyle=null,(e=r.createRadialGradient(20*n/100,20*o/100,20*t/100,20*n/100,20*o/100,80*(n>o?n:o)/100)).addColorStop(0,"rgba(41, 196, 255, 0.13)"),e.addColorStop(1,"rgba(0, 0, 0, 0)"),r.fillStyle=e,r.fillRect(0,0,n,o),r.fillStyle=null,i.forEach(t=>{r.beginPath(),r.lineCap="round",r.lineWidth=3*t.z*1,r.strokeStyle="rgba(255,255,255,"+(.5+.5*Math.random())+")",r.beginPath(),r.moveTo(t.x,t.y);var e=2*d.x,a=2*d.y;Math.abs(e)<.1&&(e=.5),Math.abs(a)<.1&&(a=.5),r.lineTo(t.x+e,t.y+a),r.stroke()})},h.updateStarts=function(){i=[];for(let t=0;t<a;t++)i.push({x:0,y:0,z:.2+.8*Math.random()})},h.resize=function(t,e){a=(t+e)/8,h.updateStarts(),t=t,e=e,n=+t,o=+e,i.forEach(m)},h.velocity=d,h}Game.on(EVENT_TYPE.OPEN_LOADED_SCENEED,function(t){Game.removeAllUI();var e=Game.getSceneSbRect(),a=userUtilsPro.createCvsTexture(),r=(Game.addNowSceneUiChild(a),Game.createUI("selectLevel"),a.setCvsWidth(e.width),a.setCvsHeight(e.height),Game.set("startBg",a),a.getCtx()),l=runBg(r),n=(l.resize(e.width,e.height),Game.setIntervalGame(function(){r.clearRect(0,0,e.width,e.height),l.update(),l.render(),a._update()},0));Game.set("timmer1",n)}),Game.on(EVENT_TYPE.CLOSE_SCENE,function(){Game.clearTimeGame(Game.get("timmer1")),Game.get("startBg").destroy()});